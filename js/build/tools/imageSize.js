const r=Buffer.from([137,80,78,71,13,10,26,10]),e=Buffer.from("IHDR"),n=13;function parsePNG(t){try{if(t.length<33)return null;if(!r.equals(t.subarray(0,8)))return null;if(t.readUInt32BE(8)!==n)return null;const u=t.subarray(12,16);if(!e.equals(u))return null;const l=t.readUInt32BE(16);return{width:l,height:t.readUInt32BE(20),type:"png"}}catch(r){return console.error(r),null}}const t=65496,u=65497,l=[65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487];function parseJPEG(r){try{if(r.readUInt16BE(0)!==t)return null;let e=2;for(;e<r.length;){for(;255!==r[e];)if(e++,e>=r.length)return null;for(;255===r[e];)if(e++,e>=r.length)return null;const n=r[e];if(e++,0===n)continue;const t=65280|n;if(l.includes(t))return{height:r.readUInt16BE(e+3),width:r.readUInt16BE(e+5),type:"jpeg"};if(t===u||t>=65488&&t<=65495)continue;e+=r.readUInt16BE(e)}return null}catch(r){return console.error(r),null}}module.exports={imageSize:function imageSize(r){try{const e=parsePNG(r);if(e)return e;const n=parseJPEG(r);return n||(console.error("Unsupported image format"),null)}catch(r){return console.error(r),null}},parsePNG:parsePNG,parseJPEG:parseJPEG};
//# sourceMappingURL=imageSize.js.map